define(["require","exports"],function(a,b){"use strict";var c;!function(a){a[a.Home=0]="Home",a[a.Number=1]="Number",a[a.Float=2]="Float",a[a.Identifier=3]="Identifier",a[a.Delimiter=4]="Delimiter"}(c||(c={})),function(a){a[a.lex_null=0]="lex_null",a[a.lex_number=1]="lex_number",a[a.lex_var=2]="lex_var",a[a.lex_func=3]="lex_func",a[a.lex_minus=4]="lex_minus",a[a.lex_plus=5]="lex_plus",a[a.lex_mul=6]="lex_mul",a[a.lex_div=7]="lex_div",a[a.lex_lbracket=8]="lex_lbracket",a[a.lex_rbracket=9]="lex_rbracket",a[a.lex_comma=10]="lex_comma"}(b.LexType||(b.LexType={}));var d=b.LexType,e=["(",")","*","/","+","-",","],f=[d.lex_lbracket,d.lex_rbracket,d.lex_mul,d.lex_div,d.lex_plus,d.lex_minus,d.lex_comma],g=function(){function a(){this.CS=c.Home,this.buf=""}return a.prototype.Step=function(a){switch(this.CS){case c.Home:if(/[0-9]/.test(a))this.CS=c.Number,this.buf=a;else if(/[a-z]|[A-Z]/.test(a))this.CS=c.Identifier,this.buf=a;else{if(e.indexOf(a)===-1)throw"Unknown symbol";this.CS=c.Delimiter,this.buf=a}break;case c.Number:if(/[0-9]/.test(a))this.buf+=a;else{if("."!==a)return this.CS=c.Home,{type:d.lex_number,value:this.buf};this.buf+=a,this.CS=c.Float}break;case c.Float:if(!/[0-9]/.test(a))return this.CS=c.Home,{type:d.lex_number,value:this.buf};this.buf+=a;break;case c.Identifier:if(!/[a-z]|[A-Z]/.test(a))return"x"===this.buf?(this.CS=c.Home,{type:d.lex_var,value:"x"}):"y"===this.buf?(this.CS=c.Home,{type:d.lex_var,value:"y"}):(this.CS=c.Home,{type:d.lex_func,value:this.buf});this.buf+=a;break;case c.Delimiter:this.CS=c.Home;var b=void 0;if((b=e.indexOf(this.buf))!==-1)return this.CS=c.Home,{type:f[b],value:e[b]};throw"impossible error"}return{type:d.lex_null,value:""}},a.prototype.MakeStep=function(a){var b;if(";"===a){if(b=this.Step(a),!b.type)throw"unknown symbol";return b}return(b=this.Step(a)).type&&this.Step(a),b},a}();b.LexAnalyser=g});